(this["webpackJsonpdatathon-ui"]=this["webpackJsonpdatathon-ui"]||[]).push([[0],{172:function(e,n,t){},173:function(e,n,t){},264:function(e,n,t){"use strict";t.r(n);var o=t(6),i=t.n(o),s=t(156),r=t.n(s),a=(t(172),t(173),t(85)),c=t.n(a),l=t(110),u=t(166),h=t(160),p=t(161),d=t(162),T=t(163),f=t(86),E=t(167),g=t(165),v=t(67),b=t.n(v),A=t(164),O=t.n(A),C=t(17),R="[CONFIDENTIAL]",_=new O.a;t(182).config();var S=t(186),j=S.Configuration,N=S.OpenAIApi,m=t(217),P=m.driver("neo4j+s://f79205bc.databases.neo4j.io:7687",m.auth.basic("neo4j","kLy2ToqJaVO6OZmJ3fR3ETKhxB7-KmBLfqSdkwClVYs")).session({database:Object({NODE_ENV:"production",PUBLIC_URL:"/DigitalTracesApp2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NEO4JPASSWORD:"kLy2ToqJaVO6OZmJ3fR3ETKhxB7-KmBLfqSdkwClVYs",REACT_APP_NEO4JURI:"neo4j+s://f79205bc.databases.neo4j.io:7687",REACT_APP_NEO4JUSER:"neo4j",REACT_APP_OPENAI_API_KEY:"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"}).REACT_APP_NEO4JDATABASE||"neo4j"}),y=new N(new j({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/DigitalTracesApp2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NEO4JPASSWORD:"kLy2ToqJaVO6OZmJ3fR3ETKhxB7-KmBLfqSdkwClVYs",REACT_APP_NEO4JURI:"neo4j+s://f79205bc.databases.neo4j.io:7687",REACT_APP_NEO4JUSER:"neo4j",REACT_APP_OPENAI_API_KEY:"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"}).REACT_APP_API_KEY}));_.init({volume:1,lang:"en-GB",rate:1,pitch:1,voice:"Google UK English Male",splitSentences:!0,listeners:{onvoiceschanged:function(e){console.log("Event voiceschanged",e)}}});var x=function(e){Object(E.a)(t,e);var n=Object(g.a)(t);function t(e){var o;return Object(d.a)(this,t),(o=n.call(this,e)).state={loading:!0,result:""},o.triggetNext=o.triggetNext.bind(Object(f.a)(o)),o}return Object(T.a)(t,[{key:"callMoviesBot",value:function(){var e=this,n=this.props.steps.user.value;function t(){return(t=Object(p.a)(b.a.mark((function t(){var o,i,s,r,a,c,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if('\n      #Which library collections are included in this archive?\n      MATCH(n:`Library Collection`)\n      RETURN n.Title;\n      \n      #Who is interviewed most often in the archive?\n      MATCH (n)-[r:interviewee]->()\n      RETURN n, COUNT(r) AS numRels\n      ORDER BY numRels DESC\n      LIMIT 1\n      \n      #How many issues of The Real News are in this archive?\n      MATCH (n:Collection_items)\n      WHERE n.Title CONTAINS "The Real News"\n      RETURN count(n)\n      #',o='\n      #Which library collections are included in this archive?\n      MATCH(n:`Library Collection`)\n      RETURN n.Title;\n      \n      #Who is interviewed most often in the archive?\n      MATCH (n)-[r:interviewee]->()\n      RETURN n, COUNT(r) AS numRels\n      ORDER BY numRels DESC\n      LIMIT 1\n      \n      #How many issues of The Real News are in this archive?\n      MATCH (n:Collection_items)\n      WHERE n.Title CONTAINS "The Real News"\n      RETURN count(n)\n      #'+n+"\n",i="",t.prev=3,console.log("query",o),!n){t.next=22;break}return t.next=8,y.createCompletion("davinci",{prompt:o,temperature:0,max_tokens:150,top_p:1,frequency_penalty:0,presence_penalty:0,stop:["#",";"]});case 8:return s=t.sent,console.log("response:",s),r=s.data.choices[0].text,console.log("MoviesBot:"+r),t.prev=12,t.next=15,P.run(r);case 15:a=t.sent,(c=a.records).forEach((function(e){i+=e.get(0)+", "})),i=i.slice(0,-2),console.log("records",c);case 20:return t.prev=20,t.finish(20);case 22:t.next=29;break;case 24:t.prev=24,t.t0=t.catch(3),console.error(t.t0),console.log("MoviesBot:"+i),i="Sorry I can't answer that. Could you please try again?";case 29:l=!1,i.startsWith(R)&&(l=!0),e.setState({loading:!1,result:i}),l||i.length>115?_.speak({text:"Please find the information below"}).then((function(){console.log("Success !")})).catch((function(e){console.error("An error occurred :",e)})):_.speak({text:i}).then((function(){console.log("Success !")})).catch((function(e){console.error("An error occurred :",e)}));case 33:case"end":return t.stop()}}),t,null,[[3,24],[12,,20,22]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}},{key:"triggetNext",value:function(){var e=this;this.setState({},(function(){e.props.triggerNextStep()}))}},{key:"componentDidMount",value:function(){this.callMoviesBot(),this.triggetNext()}},{key:"render",value:function(){var e,n=this.state,t=n.loading,o=n.result.split("\n"),i=[],s=Object(h.a)(o.entries());try{for(s.s();!(e=s.n()).done;){var r=Object(u.a)(e.value,2),c=r[0],l=r[1];i.push(Object(C.jsxs)("span",{children:[l,Object(C.jsx)("br",{})]},c))}}catch(p){s.e(p)}finally{s.f()}return Object(C.jsx)("div",{className:"bot-response",children:t?Object(C.jsx)(a.Loading,{}):i})}}]),t}(o.Component);x.defaultProps={steps:void 0,triggerNextStep:void 0};var w=x,k={background:"#f5f8fb",fontFamily:"Tahoma",headerBgColor:"#0066ff",headerFontColor:"#fff",headerFontSize:"15px",botBubbleColor:"#3399ff",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"},B=[{id:"bot-welcome",message:"Welcome to Digital Traces bot, how can I help?",trigger:"user"},{id:"user",user:!0,trigger:"bot-response"},{id:"bot-response",component:Object(C.jsx)(w,{}),waitAction:!0,asMessage:!0,trigger:"user"},{id:"not-bye",message:"Thank you. Have a great day!",end:!0}];var D=function(){var e=Object(C.jsx)(c.a,{steps:B,headerTitle:"Digital Traces Bot",botAvatar:"ai_trans.png",userAvatar:"user.png",recognitionEnable:!0,width:"450px",speechSynthesis:{enable:!1,lang:"en"}});return Object(C.jsx)("div",{className:"App",style:{display:"flex",justifyContent:"center"},children:""!==k?Object(C.jsxs)(l.ThemeProvider,{theme:k,children:[" ",e," "]}):e})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,265)).then((function(n){var t=n.getCLS,o=n.getFID,i=n.getFCP,s=n.getLCP,r=n.getTTFB;t(e),o(e),i(e),s(e),r(e)}))};r.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(D,{})}),document.getElementById("root")),I(console.log)}},[[264,1,2]]]);
//# sourceMappingURL=main.ffb385f9.chunk.js.map