(this["webpackJsonpdatathon-ui"]=this["webpackJsonpdatathon-ui"]||[]).push([[0],{172:function(e,n,t){},173:function(e,n,t){},264:function(e,n,t){"use strict";t.r(n);var o=t(6),s=t.n(o),r=t(156),i=t.n(r),a=(t(172),t(173),t(85)),c=t.n(a),l=t(110),u=t(166),h=t(160),d=t(161),T=t(162),f=t(163),p=t(86),b=t(167),v=t(165),E=t(67),g=t.n(E),O=t(164),R=t.n(O),C=t(17),A="[CONFIDENTIAL]",_=new R.a;t(182).config();var S=t(186),j=S.Configuration,N=S.OpenAIApi,P=t(217),m=P.driver("neo4j+s://f79205bc.databases.neo4j.io:7687",P.auth.basic("neo4j","kLy2ToqJaVO6OZmJ3fR3ETKhxB7-KmBLfqSdkwClVYs")).session({database:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NEO4JPASSWORD:"kLy2ToqJaVO6OZmJ3fR3ETKhxB7-KmBLfqSdkwClVYs",REACT_APP_NEO4JURI:"neo4j+s://f79205bc.databases.neo4j.io:7687",REACT_APP_NEO4JUSER:"neo4j",REACT_APP_OPENAI_API_KEY:"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"}).REACT_APP_NEO4JDATABASE||"neo4j"}),y=new N(new j({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NEO4JPASSWORD:"kLy2ToqJaVO6OZmJ3fR3ETKhxB7-KmBLfqSdkwClVYs",REACT_APP_NEO4JURI:"neo4j+s://f79205bc.databases.neo4j.io:7687",REACT_APP_NEO4JUSER:"neo4j",REACT_APP_OPENAI_API_KEY:"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"}).REACT_APP_API_KEY}));_.init({volume:1,lang:"en-GB",rate:1,pitch:1,voice:"Google UK English Male",splitSentences:!0,listeners:{onvoiceschanged:function(e){console.log("Event voiceschanged",e)}}});var x=function(e){Object(b.a)(t,e);var n=Object(v.a)(t);function t(e){var o;return Object(T.a)(this,t),(o=n.call(this,e)).state={loading:!0,result:""},o.triggetNext=o.triggetNext.bind(Object(p.a)(o)),o}return Object(f.a)(t,[{key:"callMoviesBot",value:function(){var e=this,n=this.props.steps.user.value;function t(){return(t=Object(d.a)(g.a.mark((function t(){var o,s,r,i,a,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if('\n      #Which library collections are included in this archive?\n      MATCH(n:`Library Collection`)\n      RETURN n.Title;\n      \n      #Who is interviewed most often in the archive?\n      MATCH (n)-[r:interviewee]->()\n      RETURN n, COUNT(r) AS numRels\n      ORDER BY numRels DESC\n      LIMIT 1\n      \n      #How many issues of The Real News are in this archive?\n      MATCH (n:Collection_items)\n      WHERE n.Title CONTAINS "The Real News"\n      RETURN count(n)\n      #',o='\n      #Which library collections are included in this archive?\n      MATCH(n:`Library Collection`)\n      RETURN n.Title;\n      \n      #Who is interviewed most often in the archive?\n      MATCH (n)-[r:interviewee]->()\n      RETURN n, COUNT(r) AS numRels\n      ORDER BY numRels DESC\n      LIMIT 1\n      \n      #How many issues of The Real News are in this archive?\n      MATCH (n:Collection_items)\n      WHERE n.Title CONTAINS "The Real News"\n      RETURN count(n)\n      #'+n+"\n",s="",t.prev=3,console.log("query",o),!n){t.next=22;break}return t.next=8,y.createCompletion("davinci",{prompt:o,temperature:0,max_tokens:150,top_p:1,frequency_penalty:0,presence_penalty:0,stop:["#",";"]});case 8:return r=t.sent,console.log("response:",r),i=r.data.choices[0].text,console.log("MoviesBot:"+i),t.prev=12,t.next=15,m.run(i);case 15:a=t.sent,(c=a.records).forEach((function(e){s+=e.get(0)+", "})),s=s.slice(0,-2),console.log("records",c);case 20:return t.prev=20,t.finish(20);case 22:t.next=29;break;case 24:t.prev=24,t.t0=t.catch(3),console.error(t.t0),console.log("MoviesBot:"+s),s="Sorry I can't answer that. Could you please try again?";case 29:l=!1,s.startsWith(A)&&(l=!0),e.setState({loading:!1,result:s}),l||s.length>115?_.speak({text:"Please find the information below"}).then((function(){console.log("Success !")})).catch((function(e){console.error("An error occurred :",e)})):_.speak({text:s}).then((function(){console.log("Success !")})).catch((function(e){console.error("An error occurred :",e)}));case 33:case"end":return t.stop()}}),t,null,[[3,24],[12,,20,22]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}},{key:"triggetNext",value:function(){var e=this;this.setState({},(function(){e.props.triggerNextStep()}))}},{key:"componentDidMount",value:function(){this.callMoviesBot(),this.triggetNext()}},{key:"render",value:function(){var e,n=this.state,t=n.loading,o=n.result.split("\n"),s=[],r=Object(h.a)(o.entries());try{for(r.s();!(e=r.n()).done;){var i=Object(u.a)(e.value,2),c=i[0],l=i[1];s.push(Object(C.jsxs)("span",{children:[l,Object(C.jsx)("br",{})]},c))}}catch(d){r.e(d)}finally{r.f()}return Object(C.jsx)("div",{className:"bot-response",children:t?Object(C.jsx)(a.Loading,{}):s})}}]),t}(o.Component);x.defaultProps={steps:void 0,triggerNextStep:void 0};var k=x,w={background:"#f5f8fb",fontFamily:"Tahoma",headerBgColor:"#0066ff",headerFontColor:"#fff",headerFontSize:"15px",botBubbleColor:"#3399ff",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"},B=[{id:"bot-welcome",message:"Welcome to Digital Traces bot, how can I help?",trigger:"user"},{id:"user",user:!0,trigger:"bot-response"},{id:"bot-response",component:Object(C.jsx)(k,{}),waitAction:!0,asMessage:!0,trigger:"user"},{id:"not-bye",message:"Thank you. Have a great day!",end:!0}];var I=function(){var e=Object(C.jsx)(c.a,{steps:B,headerTitle:"Digital Traces Bot",botAvatar:"ai_trans.png",userAvatar:"user.png",recognitionEnable:!0,width:"450px",speechSynthesis:{enable:!1,lang:"en"}});return Object(C.jsx)("div",{className:"App",style:{display:"flex",justifyContent:"center"},children:""!==w?Object(C.jsxs)(l.ThemeProvider,{theme:w,children:[" ",e," "]}):e})},D=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,265)).then((function(n){var t=n.getCLS,o=n.getFID,s=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),o(e),s(e),r(e),i(e)}))};i.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(I,{})}),document.getElementById("root")),D(console.log)}},[[264,1,2]]]);
//# sourceMappingURL=main.ab4926ae.chunk.js.map