{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\nvar SERVICE_UNAVAILABLE = neo4j_driver_core_1.error.SERVICE_UNAVAILABLE,\n  SESSION_EXPIRED = neo4j_driver_core_1.error.SESSION_EXPIRED;\nvar ConnectionErrorHandler = /** @class */function () {\n  function ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleAuthorizationExpired) {\n    this._errorCode = errorCode;\n    this._handleUnavailability = handleUnavailability || noOpHandler;\n    this._handleWriteFailure = handleWriteFailure || noOpHandler;\n    this._handleAuthorizationExpired = handleAuthorizationExpired || noOpHandler;\n  }\n  ConnectionErrorHandler.create = function (_a) {\n    var errorCode = _a.errorCode,\n      handleUnavailability = _a.handleUnavailability,\n      handleWriteFailure = _a.handleWriteFailure,\n      handleAuthorizationExpired = _a.handleAuthorizationExpired;\n    return new ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleAuthorizationExpired);\n  };\n  /**\n   * Error code to use for network errors.\n   * @return {string} the error code.\n   */\n  ConnectionErrorHandler.prototype.errorCode = function () {\n    return this._errorCode;\n  };\n  /**\n   * Handle and transform the error.\n   * @param {Neo4jError} error the original error.\n   * @param {ServerAddress} address the address of the connection where the error happened.\n   * @return {Neo4jError} new error that should be propagated to the user.\n   */\n  ConnectionErrorHandler.prototype.handleAndTransformError = function (error, address) {\n    if (isAutorizationExpiredError(error)) {\n      return this._handleAuthorizationExpired(error, address);\n    }\n    if (isAvailabilityError(error)) {\n      return this._handleUnavailability(error, address);\n    }\n    if (isFailureToWrite(error)) {\n      return this._handleWriteFailure(error, address);\n    }\n    return error;\n  };\n  return ConnectionErrorHandler;\n}();\nexports.default = ConnectionErrorHandler;\nfunction isAutorizationExpiredError(error) {\n  return error && (error.code === 'Neo.ClientError.Security.AuthorizationExpired' || error.code === 'Neo.ClientError.Security.TokenExpired');\n}\nfunction isAvailabilityError(error) {\n  if (error) {\n    return error.code === SESSION_EXPIRED || error.code === SERVICE_UNAVAILABLE || error.code === 'Neo.TransientError.General.DatabaseUnavailable';\n  }\n  return false;\n}\nfunction isFailureToWrite(error) {\n  if (error) {\n    return error.code === 'Neo.ClientError.Cluster.NotALeader' || error.code === 'Neo.ClientError.General.ForbiddenOnReadOnlyDatabase';\n  }\n  return false;\n}\nfunction noOpHandler(error) {\n  return error;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","neo4j_driver_core_1","require","SERVICE_UNAVAILABLE","error","SESSION_EXPIRED","ConnectionErrorHandler","errorCode","handleUnavailability","handleWriteFailure","handleAuthorizationExpired","_errorCode","_handleUnavailability","noOpHandler","_handleWriteFailure","_handleAuthorizationExpired","create","_a","prototype","handleAndTransformError","address","isAutorizationExpiredError","isAvailabilityError","isFailureToWrite","default","code"],"sources":["C:/Stanford/DigitalTracesApp3/node_modules/neo4j-driver-bolt-connection/lib/connection/connection-error-handler.js"],"sourcesContent":["\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\nvar SERVICE_UNAVAILABLE = neo4j_driver_core_1.error.SERVICE_UNAVAILABLE, SESSION_EXPIRED = neo4j_driver_core_1.error.SESSION_EXPIRED;\nvar ConnectionErrorHandler = /** @class */ (function () {\n    function ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleAuthorizationExpired) {\n        this._errorCode = errorCode;\n        this._handleUnavailability = handleUnavailability || noOpHandler;\n        this._handleWriteFailure = handleWriteFailure || noOpHandler;\n        this._handleAuthorizationExpired = handleAuthorizationExpired || noOpHandler;\n    }\n    ConnectionErrorHandler.create = function (_a) {\n        var errorCode = _a.errorCode, handleUnavailability = _a.handleUnavailability, handleWriteFailure = _a.handleWriteFailure, handleAuthorizationExpired = _a.handleAuthorizationExpired;\n        return new ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleAuthorizationExpired);\n    };\n    /**\n     * Error code to use for network errors.\n     * @return {string} the error code.\n     */\n    ConnectionErrorHandler.prototype.errorCode = function () {\n        return this._errorCode;\n    };\n    /**\n     * Handle and transform the error.\n     * @param {Neo4jError} error the original error.\n     * @param {ServerAddress} address the address of the connection where the error happened.\n     * @return {Neo4jError} new error that should be propagated to the user.\n     */\n    ConnectionErrorHandler.prototype.handleAndTransformError = function (error, address) {\n        if (isAutorizationExpiredError(error)) {\n            return this._handleAuthorizationExpired(error, address);\n        }\n        if (isAvailabilityError(error)) {\n            return this._handleUnavailability(error, address);\n        }\n        if (isFailureToWrite(error)) {\n            return this._handleWriteFailure(error, address);\n        }\n        return error;\n    };\n    return ConnectionErrorHandler;\n}());\nexports.default = ConnectionErrorHandler;\nfunction isAutorizationExpiredError(error) {\n    return error && (error.code === 'Neo.ClientError.Security.AuthorizationExpired' ||\n        error.code === 'Neo.ClientError.Security.TokenExpired');\n}\nfunction isAvailabilityError(error) {\n    if (error) {\n        return (error.code === SESSION_EXPIRED ||\n            error.code === SERVICE_UNAVAILABLE ||\n            error.code === 'Neo.TransientError.General.DatabaseUnavailable');\n    }\n    return false;\n}\nfunction isFailureToWrite(error) {\n    if (error) {\n        return (error.code === 'Neo.ClientError.Cluster.NotALeader' ||\n            error.code === 'Neo.ClientError.General.ForbiddenOnReadOnlyDatabase');\n    }\n    return false;\n}\nfunction noOpHandler(error) {\n    return error;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}